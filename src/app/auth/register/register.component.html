<!-- signup.component.html -->
<div class="h-screen md:flex">
  <!-- Left Side -->
  <div class="relative overflow-hidden md:flex w-1/2 bg-gradient-to-tr from-blue-700 to-purple-500 justify-around items-center hidden">
    <div>
      <h1 class="text-white font-bold text-4xl font-sans">Marches Publics</h1>
      <p class="text-white mt-1">The official platform for government tenders in Morocco</p>
      <a routerLink="/login"
         class="flex w-28 text-center justify-center bg-white text-blue-700 mt-4 py-2 rounded-2xl font-bold mb-2 cursor-pointer">
        LOGIN
      </a>
    </div>
    <div class="absolute -bottom-32 -left-40 w-80 h-80 border-4 rounded-full border-opacity-30 border-t-8 border-white"></div>
    <div class="absolute -bottom-40 -left-20 w-80 h-80 border-4 rounded-full border-opacity-30 border-t-8 border-white"></div>
    <div class="absolute -top-40 -right-0 w-80 h-80 border-4 rounded-full border-opacity-30 border-t-8 border-white"></div>
    <div class="absolute -top-20 -right-20 w-80 h-80 border-4 rounded-full border-opacity-30 border-t-8 border-white"></div>
  </div>

  <!-- Right Side -->
  <div class="flex md:w-1/2 justify-center py-10 items-center bg-white">
    <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="bg-white w-full px-6 max-w-md">
      <h1 class="text-gray-800 font-bold text-2xl mb-4">Create Account</h1>
      <p class="text-sm font-normal text-gray-600 mb-7">Join our platform to access government tenders</p>

      <!-- Error message -->
      <div *ngIf="errorMessage" class="mb-4 p-3 bg-red-100 text-red-700 rounded-lg">
        {{ errorMessage }}
      </div>

      <!-- Username -->
      <div class="mb-4">
        <div class="flex items-center border-2 py-2 px-3 rounded-2xl"
             [ngClass]="{'border-red-500': f['username'].invalid && f['username'].touched}">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
          </svg>
          <input
            formControlName="username"
            class="pl-2 outline-none border-none w-full"
            type="text"
            placeholder="Username"
          />
        </div>
        <span *ngIf="f['username'].invalid && f['username'].touched" class="text-red-600 text-sm px-1">
          Username is required (min 3 characters)
        </span>
      </div>

      <!-- Email -->
      <div class="mb-4">
        <div class="flex items-center border-2 py-2 px-3 rounded-2xl"
             [ngClass]="{'border-red-500': f['email'].invalid && f['email'].touched}">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207" />
          </svg>
          <input
            formControlName="email"
            class="pl-2 outline-none border-none w-full"
            type="email"
            placeholder="Email"
          />
        </div>
        <span *ngIf="f['email'].invalid && f['email'].touched" class="text-red-600 text-sm px-1">
          Please enter a valid email address
        </span>
      </div>

      <!-- Password -->
      <div class="mb-4">
        <div class="flex items-center border-2 py-2 px-3 rounded-2xl"
             [ngClass]="{'border-red-500': f['password'].invalid && f['password'].touched}">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" />
          </svg>
          <input
            formControlName="password"
            class="pl-2 outline-none border-none w-full"
            type="password"
            placeholder="Password"
          />
        </div>
        <span *ngIf="f['password'].invalid && f['password'].touched" class="text-red-600 text-sm px-1">
          Password is required (min 6 characters)
        </span>
      </div>

      <!-- Confirm Password -->
      <div class="mb-4">
        <div class="flex items-center border-2 py-2 px-3 rounded-2xl"
             [ngClass]="{'border-red-500': (f['confirmPassword'].invalid && f['confirmPassword'].touched) || passwordMatchError}">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" />
          </svg>
          <input
            formControlName="confirmPassword"
            class="pl-2 outline-none border-none w-full"
            type="password"
            placeholder="Confirm Password"
          />
        </div>
        <span *ngIf="f['confirmPassword'].invalid && f['confirmPassword'].touched" class="text-red-600 text-sm px-1">
          Please confirm your password
        </span>
        <span *ngIf="passwordMatchError" class="text-red-600 text-sm px-1">
          Passwords must match
        </span>
      </div>

      <div class="flex items-center mb-4">
        <input id="terms" formControlName="terms" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
        <label for="terms" class="ml-2 block text-sm text-gray-600">
          I agree to the <a href="#" class="text-purple-600 hover:text-purple-500">Terms and Conditions</a>
        </label>
      </div>
      <span *ngIf="f['terms'].invalid && f['terms'].touched" class="text-red-600 text-sm px-1 block mb-4">
        You must agree to the terms and conditions
      </span>

      <button
        type="submit"
        [disabled]="isSubmitting"
        class="block w-full bg-gradient-to-r from-blue-600 to-purple-600 mt-6 py-3 rounded-2xl text-white font-semibold mb-2 hover:shadow-lg transition-all disabled:opacity-70 disabled:cursor-not-allowed">
        <span *ngIf="isSubmitting" class="inline-block mr-2">
          <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
        </span>
        {{ isSubmitting ? 'Registering...' : 'Register' }}
      </button>

      <p class="text-sm text-gray-500 mt-4 text-center">
        Already have an account? <a routerLink="/login" class="text-blue-600 hover:text-blue-500">Log in</a>
      </p>
    </form>
  </div>
</div>
